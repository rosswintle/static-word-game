<?php extend('../templates/main.html', ['title' => 'Static Scrabble']) ?>

<?php
// Page content here
// To include partials use:
// includePart('../parts/some-part.html', ['param' => 'value'])
?>

<h1 class="mt-8 mb-8 text-6xl text-center">Static Scrabble!</h1>

<div x-data="scrabble" class="w-full max-w-4xl mx-auto">
    <div id="left-right-container" class="grid grid-cols-2 grid-rows-1">
        <div id="left-container">
            <div id="decode-ui">
                <h2 class="font-bold mb-2">Decode from Base64</h2>
                <div class="mb-2 flex items-center">
                    <span>Code</span>
                    <input class="px-2 py-1 ml-2 text-sm" name="base64code" type="text" x-model="base64code">
                </div>
                <button class="px-4 py-2 mt-2 border" @click="decodeBase64">Decode</button>
            </div>


            <div id="add-move-ui" class="mt-4">
                <h2 class="font-bold mb-2">Add a move</h2>
                <div class="mb-2 flex items-center">
                    <span>Across?</span>
                    <input class="px-2 py-1 ml-2 text-sm" name="acrossFlag" type="text" x-model="newAcrossFlag">
                </div>

                <div class="mb-2 flex items-center">
                    <span>X</span>
                    <input class="px-2 py-1 ml-2 text-sm" name="x" type="number" min=0 max=15 x-model="newX">
                </div>

                <div class="mb-2 flex items-center">
                    <span>Y</span>
                    <input class="px-2 py-1 ml-2 text-sm" name="y" type="number" min=0 max=15 x-model="newY">
                </div>

                <div class="mb-2 flex items-center">
                    <span>Word</span>
                    <input class="px-2 py-1 ml-2 text-sm" name="word" type="text" x-model="newWord">
                </div>
                <button class="px-4 py-2 mt-2 border" @click="addNewWord">Add</button>
            </div>

            <div id="player-1-ui" class="mt-4">
                <h2 class="font-bold mb-2">Player 1</h2>
                <div class="mb-2 flex items-center">
                    <span>Score</span>
                    <input class="px-2 py-1 ml-2 text-sm" name="p1Score" type="text" x-model="p1Score">
                </div>

                <div class="mb-2 flex items-center">
                    <span>Tiles</span>
                    <input class="px-2 py-1 ml-2 text-sm" name="p1Tiles" type="text" x-model="p1Tiles">
                </div>

                <button class="px-4 py-2 mt-2 border" @click="updateP1">Update P1</button>
            </div>

            <div id="player-2-ui" class="mt-4">
                <h2 class="font-bold mb-2">Player 2</h2>
                <div class="mb-2 flex items-center">
                    <span>Score</span>
                    <input class="px-2 py-1 ml-2 text-sm" name="p2Score" type="text" x-model="p2Score">
                </div>

                <div class="mb-2 flex items-center">
                    <span>Tiles</span>
                    <input class="px-2 py-1 ml-2 text-sm" name="p2Tiles" type="text" x-model="p2Tiles">
                </div>

                <button class="px-4 py-2 mt-2 border" @click="updateP2">Update P2</button>
            </div>
        </div>

        <div id="right-container">
            <div id="board" class="flex flex-col">
                <template x-for="(row, rowIndex) in board" :key="`row-${rowIndex}`">
                    <div class="flex flex-row">
                        <template x-for="(tile, colIndex) in row" :key="`tile-${colIndex}`">
                            <div class="border border-gray-300 w-6 h-6 leading-6 text-center" x-text="tile"></div>
                        </template>
                    </div>
                </template>
            </div>

            <div id="output-ui" class="mt-4">
                <h3 class="font-bold">Moves</h3>
                <ul class="mb-4">
                    <template x-for="(move, index) in game.moves" :key="`move-${index}`">
                        <li>
                            Across: <span x-text="(Move.decodeFromBigInt(move.encodeAsBigint())).acrossFlag"></span>
                            | X: <span x-text="(Move.decodeFromBigInt(move.encodeAsBigint())).x"></span>
                            | Y: <span x-text="(Move.decodeFromBigInt(move.encodeAsBigint())).y"></span>
                            | Word: <span x-text="(Move.decodeFromBigInt(move.encodeAsBigint())).word"></span>
                        </li>
                    </template>
                </ul>
                <!-- Encoded move: <span x-text="move.encodeAsBigint().toString()"></span><br>
            Decoded move: Across? <span x-text="(Move.decodeFromBigInt(move.encodeAsBigint())).acrossFlag"></span><br>
            X: <span x-text="(Move.decodeFromBigInt(move.encodeAsBigint())).x"></span><br>
            Y: <span x-text="(Move.decodeFromBigInt(move.encodeAsBigint())).y"></span><br>
            Word: <span x-text="(Move.decodeFromBigInt(move.encodeAsBigint())).word"></span><br>
            <br>
            ASCII: <span x-text="move.encodeAsBigint().toAscii()"></span><br>
            From ASCII (Should be same as Encoded): <span
                x-text="CodedInt.fromAscii(move.encodeAsBigint().toAscii()).toString()"></span><br>
            <br> -->
                Game Base64 (<span x-text="game.encodeAsBigint().toBase64().length"></span>): <code
                    x-text="game.encodeAsBigint().toBase64()"></code><br>
                <!-- From Base64 (Should be same as Encoded): <span
                x-text="CodedInt.fromBase64(move.encodeAsBigint().toBase64()).toString()"></span><br> -->
            </div>

        </div>
    </div>
</div>

<?php endExtend(); ?>
